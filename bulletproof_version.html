Squash Camp Attendance Tracker
    
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 1rem;
        }
        .container { max-width: 1200px; margin: 0 auto; }
        .header {
            background: white; border-radius: 12px; padding: 2rem; margin-bottom: 2rem;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2); text-align: center;
        }
        .header h1 { color: #333; font-size: 2.5rem; margin-bottom: 1rem; }
        .sync-status { display: flex; align-items: center; justify-content: center; gap: 0.5rem; margin-bottom: 1rem; font-size: 0.9rem; }
        .sync-indicator { width: 10px; height: 10px; border-radius: 50%; background: #22c55e; }
        .sync-indicator.error { background: #ef4444; }
        .sync-indicator.syncing { background: #f59e0b; animation: pulse 2s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        .date-controls { display: flex; gap: 1rem; align-items: center; justify-content: center; flex-wrap: wrap; margin-bottom: 1rem; }
        .date-input { padding: 0.75rem; border: 2px solid #ddd; border-radius: 8px; font-size: 1rem; min-width: 200px; }
        .stats-card { background: linear-gradient(135deg, #667eea, #764ba2); color: white; padding: 1.5rem; border-radius: 12px; text-align: center; }
        .stats-number { font-size: 3rem; font-weight: bold; margin-bottom: 0.5rem; }
        .stats-label { font-size: 1.2rem; opacity: 0.9; }
        .main-content { display: grid; grid-template-columns: 1fr 300px; gap: 2rem; margin-bottom: 2rem; }
        @media (max-width: 768px) { .main-content { grid-template-columns: 1fr; } }
        .players-section { background: white; border-radius: 12px; padding: 2rem; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
        .section-title { font-size: 1.5rem; color: #333; margin-bottom: 1.5rem; padding-bottom: 0.5rem; border-bottom: 2px solid #667eea; }
        .add-player-section { background: #f8f9ff; padding: 1.5rem; border-radius: 12px; margin-bottom: 2rem; }
        .add-player-form { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-bottom: 1rem; }
        .form-input { padding: 0.75rem; border: 2px solid #ddd; border-radius: 8px; font-size: 1rem; }
        .form-input:focus { outline: none; border-color: #667eea; }
        .photo-upload-area { grid-column: 1 / -1; display: flex; align-items: center; gap: 1rem; padding: 1rem; border: 2px dashed #ddd; border-radius: 8px; cursor: pointer; transition: all 0.3s; }
        .photo-upload-area:hover { border-color: #667eea; background: #f0f4ff; }
        .photo-preview { width: 60px; height: 60px; border-radius: 50%; background: #eee; display: flex; align-items: center; justify-content: center; overflow: hidden; font-size: 2rem; }
        .photo-preview img { width: 100%; height: 100%; object-fit: cover; }
        .btn { padding: 0.75rem 1.5rem; border: none; border-radius: 8px; font-size: 1rem; font-weight: 600; cursor: pointer; transition: all 0.3s; }
        .btn-primary { background: linear-gradient(135deg, #667eea, #764ba2); color: white; }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4); }
        .btn-secondary { background: #f1f3f4; color: #333; }
        .btn-secondary:hover { background: #e8eaed; }
        .players-grid { display: grid; gap: 1rem; }
        .player-card { background: #f8f9ff; border-radius: 12px; padding: 1.5rem; display: flex; align-items: center; gap: 1rem; transition: all 0.3s; border: 2px solid transparent; }
        .player-card.present { border-color: #22c55e; background: #f0fdf4; }
        .player-card.absent { border-color: #ef4444; background: #fef2f2; }
        .player-avatar { width: 60px; height: 60px; border-radius: 50%; background: #e5e7eb; display: flex; align-items: center; justify-content: center; font-size: 2rem; color: #9ca3af; overflow: hidden; flex-shrink: 0; }
        .player-avatar img { width: 100%; height: 100%; object-fit: cover; }
        .player-info { flex: 1; }
        .player-name { font-size: 1.2rem; font-weight: 600; color: #333; margin-bottom: 0.25rem; }
        .player-level { color: #666; margin-bottom: 0.25rem; }
        .player-contact { font-size: 0.9rem; color: #888; }
        .player-actions { display: flex; gap: 0.5rem; align-items: center; }
        .attendance-btn { width: 60px; height: 60px; border: none; border-radius: 50%; font-size: 1.5rem; cursor: pointer; transition: all 0.3s; font-weight: bold; }
        .attendance-btn.present { background: #22c55e; color: white; }
        .attendance-btn.absent { background: #ef4444; color: white; }
        .attendance-btn:hover { transform: scale(1.1); }
        .action-btn { width: 40px; height: 40px; border: none; border-radius: 50%; background: #f1f3f4; color: #666; cursor: pointer; transition: all 0.3s; font-size: 1.2rem; }
        .action-btn:hover { background: #667eea; color: white; }
        .sidebar { display: flex; flex-direction: column; gap: 1.5rem; }
        .stats-section, .export-section { background: white; border-radius: 12px; padding: 1.5rem; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
        .stat-item { display: flex; justify-content: space-between; align-items: center; padding: 0.75rem 0; border-bottom: 1px solid #eee; }
        .stat-item:last-child { border-bottom: none; }
        .stat-label { color: #666; }
        .stat-value { font-weight: 600; color: #333; }
        .export-buttons { display: flex; flex-direction: column; gap: 0.75rem; }
        .hidden { display: none; }
        .success-message { background: #22c55e; color: white; padding: 1rem; border-radius: 8px; margin-bottom: 1rem; text-align: center; }
        .error-message { background: #ef4444; color: white; padding: 1rem; border-radius: 8px; margin-bottom: 1rem; text-align: center; }
        .level-badge { display: inline-block; padding: 0.25rem 0.75rem; border-radius: 20px; font-size: 0.8rem; font-weight: 600; margin-left: 0.5rem; }
        .level-beginner { background: #fef3c7; color: #92400e; }
        .level-intermediate { background: #dbeafe; color: #1e40af; }
        .level-advanced { background: #dcfce7; color: #166534; }
    


    
        
            🏸 Squash Camp Attendance
            
                
                Loading data...
            
            
                
                
                    0%
                    0/0 Present
                
            
        
        
            
                👥 Players
                
                    ➕ Add New Player
                    
                        
                            📷
                            
                                Add Photo
                                Click to upload
                            
                            
                        
                        
                        
                            Beginner
                            Intermediate
                            Advanced
                        
                        
                        
                        Add Player
                    
                
                
            
            
                
                    📊 Statistics
                    Total Players:0
                    Present Today:0
                    Absent Today:0
                    Attendance Rate:0%
                
                
                    💾 Export Data
                    
                        Export Today's Attendance
                        Export All Data
                    
                
            
        
    
    
        let players = [], attendance = {}, currentDate = new Date().toISOString().split('T')[0], newPlayerPhoto = '';
        function init() {
            document.getElementById('currentDate').value = currentDate;
            document.getElementById('currentDate').addEventListener('change', e => { currentDate = e.target.value; renderPlayers(); updateStats(); });
            document.getElementById('playerPhoto').addEventListener('change', e => handlePhotoUpload(e));
            loadDataFromServer();
        }
        async function loadDataFromServer() {
            try {
                setSyncStatus('Loading data...', 'syncing');
                const response = await fetch('data-handler.php?action=load');
                const data = await response.json();
                if (data.success) {
                    players = data.players || []; attendance = data.attendance || {};
                    renderPlayers(); updateStats(); setSyncStatus('Server connected', 'success');
                } else { setSyncStatus('Server error', 'error'); showMessage('Error loading data: ' + data.message, 'error'); }
            } catch (error) { setSyncStatus('Connection failed', 'error'); showMessage('Failed to connect to server', 'error'); }
        }
        async function saveDataToServer() {
            try {
                setSyncStatus('Saving...', 'syncing');
                const response = await fetch('data-handler.php', {
                    method: 'POST', headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ action: 'save', players, attendance })
                });
                const result = await response.json();
                if (result.success) { setSyncStatus('Saved to server', 'success'); }
                else { setSyncStatus('Save failed', 'error'); showMessage('Failed to save: ' + result.message, 'error'); }
            } catch (error) { setSyncStatus('Save failed', 'error'); showMessage('Failed to save to server', 'error'); }
        }
        function setSyncStatus(message, status) {
            const indicator = document.getElementById('syncIndicator'), statusText = document.getElementById('syncStatus');
            indicator.className = 'sync-indicator'; if (status === 'error') indicator.classList.add('error');
            else if (status === 'syncing') indicator.classList.add('syncing'); statusText.textContent = message;
        }
        function handlePhotoUpload(event) {
            const file = event.target.files[0]; if (!file) return;
            const reader = new FileReader(); reader.onload = e => {
                newPlayerPhoto = e.target.result;
                document.getElementById('photoPreview').innerHTML = `<img src="${e.target.result}" alt="Preview">`;
            }; reader.readAsDataURL(file);
        }
        async function addPlayer() {
            const name = document.getElementById('playerName').value.trim();
            const level = document.getElementById('playerLevel').value;
            const phone = document.getElementById('playerPhone').value.trim();
            const email = document.getElementById('playerEmail').value.trim();
            if (!name) { showMessage('Please enter a player name', 'error'); return; }
            const newPlayer = { id: Date.now(), name, level, phone, email, photo: newPlayerPhoto };
            players.push(newPlayer); await saveDataToServer(); renderPlayers(); updateStats();
            document.getElementById('playerName').value = ''; document.getElementById('playerLevel').value = 'Beginner';
            document.getElementById('playerPhone').value = ''; document.getElementById('playerEmail').value = '';
            document.getElementById('photoPreview').innerHTML = '📷'; newPlayerPhoto = '';
            showMessage('Player added successfully!', 'success');
        }
        function renderPlayers() {
            const grid = document.getElementById('playersGrid'); grid.innerHTML = '';
            players.forEach(player => {
                const isPresent = attendance[currentDate] && attendance[currentDate][player.id];
                const card = document.createElement('div'); card.className = `player-card ${isPresent ? 'present' : 'absent'}`;
                const avatarContent = player.photo ? `<img src="${player.photo}" alt="${player.name}">` : '👤';
                const levelClass = `level-${player.level.toLowerCase()}`;
                card.innerHTML = `<div class="player-avatar">${avatarContent}</div><div class="player-info"><div class="player-name">${player.name}<span class="level-badge ${levelClass}">${player.level}</span></div>${player.phone ? `<div class="player-contact">📞 ${player.phone}</div>` : ''}${player.email ? `<div class="player-contact">📧 ${player.email}</div>` : ''}</div><div class="player-actions"><button class="attendance-btn ${isPresent ? 'present' : 'absent'}" onclick="toggleAttendance(${player.id})">${isPresent ? '✓' : '✗'}</button></div>`;
                grid.appendChild(card);
            });
        }
        async function toggleAttendance(playerId) {
            if (!attendance[currentDate]) attendance[currentDate] = {};
            attendance[currentDate][playerId] = !attendance[currentDate][playerId];
            await saveDataToServer(); renderPlayers(); updateStats();
        }
        function updateStats() {
            const todayAttendance = attendance[currentDate] || {};
            const present = Object.values(todayAttendance).filter(Boolean).length;
            const total = players.length; const percentage = total > 0 ? Math.round((present / total) * 100) : 0;
            document.getElementById('attendancePercentage').textContent = `${percentage}%`;
            document.getElementById('attendanceStats').textContent = `${present}/${total} Present`;
            document.getElementById('totalPlayers').textContent = total;
            document.getElementById('presentToday').textContent = present;
            document.getElementById('absentToday').textContent = total - present;
            document.getElementById('attendanceRate').textContent = `${percentage}%`;
        }
        function exportToday() {
            const todayAttendance = attendance[currentDate] || {};
            const data = { date: currentDate, players: players.map(player => ({ name: player.name, level: player.level, phone: player.phone, email: player.email, present: !!todayAttendance[player.id] })), summary: { total: players.length, present: Object.values(todayAttendance).filter(Boolean).length, percentage: players.length > 0 ? Math.round((Object.values(todayAttendance).filter(Boolean).length / players.length) * 100) : 0 } };
            downloadJSON(data, `attendance-${currentDate}.json`);
        }
        function exportAll() {
            const data = { players, attendance, exportDate: new Date().toISOString(), version: '1.0' };
            downloadJSON(data, `squash-attendance-backup-${new Date().toISOString().split('T')[0]}.json`);
        }
        function downloadJSON(data, filename) {
            const dataStr = JSON.stringify(data, null, 2); const dataBlob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(dataBlob); const link = document.createElement('a');
            link.href = url; link.download = filename; link.click(); URL.revokeObjectURL(url);
        }
        function showMessage(message, type) {
            const existing = document.querySelector('.success-message, .error-message');
            if (existing) existing.remove(); const messageDiv = document.createElement('div');
            messageDiv.className = type === 'error' ? 'error-message' : 'success-message';
            messageDiv.textContent = message; const header = document.querySelector('.header');
            header.appendChild(messageDiv); setTimeout(() => messageDiv.remove(), 3000);
        }
        window.addEventListener('load', init);
    

